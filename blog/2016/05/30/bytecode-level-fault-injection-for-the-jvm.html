<!DOCTYPE html>
<html lang='en-gb'>
<head>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<meta content='2DQ01uUSCrnJiu_9vi7xriVgqtCE-Iz4SJJTC53-ih0' name='google-site-verification'>
<title>Byte-Monkey: Bytecode-level fault injection for the JVM - Unruly Tech</title>
<meta content='Byte-Monkey takes inspiration from Netflix’s chaos-monkeys, which have become synonymous with fault-tolerance experiments through controlled failure injection. It runs on the JVM, and twiddles the bytecode of your app to introduce the kind of failures you might encounter such as exceptions and latency.' name='description'>
<link href="../../../../images/product-logo.png" rel="icon" type="image/png" />
<link href='../../../../images/branded-product-logo.png' rel='apple-touch-icon-precomposed' type='image/png'>
<meta content='website' property='og:type'>
<meta content='Byte-Monkey: Bytecode-level fault injection for the JVM - Unruly Tech' property='og:site_name'>
<meta content='http://tech.unruly.co/images/branded-product-logo.png' property='og:image'>
<meta content='Byte-Monkey takes inspiration from Netflix’s chaos-monkeys, which have become synonymous with fault-tolerance experiments through controlled failure injection. It runs on the JVM, and twiddles the bytecode of your app to introduce the kind of failures you might encounter such as exceptions and latency.' property='og:description'>
<meta content='summary' name='twitter:card'>
<meta content='@unrulyco' name='twitter:site'>
<meta content='Byte-Monkey: Bytecode-level fault injection for the JVM - Unruly Tech' name='twitter:title'>
<meta content='Byte-Monkey takes inspiration from Netflix’s chaos-monkeys, which have become synonymous with fault-tolerance experiments through controlled failure injection. It runs on the JVM, and twiddles the bytecode of your app to introduce the kind of failures you might encounter such as exceptions and latency.' name='twitter:description'>
<meta content='http://tech.unruly.co/images/branded-product-logo.png' name='twitter:image'>
<link href='/blog/feed.xml' rel='alternate' title='Unruly Tech Blog Feed' type='application/atom+xml'>
<link href='//video.cdn-unrulymedia-5.com/unruly.github.io/atom.xml' rel='alternate' title='Unruly Tech Developer Blog Feed' type='application/atom+xml'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/github.min.css" rel="stylesheet" />
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="https://video.cdn-unrulymedia-5.com/ux-guidelines/latest/bootstrap/unruly-bootstrap.min.css?v=1" rel="stylesheet" />
<link href="https://video.cdn-unrulymedia-5.com/ux-guidelines/latest/styles/unruly-styles.css?v=1" rel="stylesheet" />
<link href="../../../../stylesheets/main.css" rel="stylesheet" />
</head>
</html>
<body class='blog blog_2016 blog_2016_05 blog_2016_05_30 blog_2016_05_30_bytecode-level-fault-injection-for-the-jvm'>
<nav class='navbar navbar-default navbar-fixed-top' role='navigation'>
<div class='container'>
<div class='row'>
<div class='navbar-header'>
<button class='navbar-toggle collapsed' data-target='#mainNavigation' data-toggle='collapse' type='button'>
<span class='sr-only'>Toggle navigation</span>
<span class='fa fa-bars'></span>
</button>
<a href="../../../../" class="navbar-brand unruly-logo unruly-logo-tech"><img src="../../../../images/header-logo.svg" class="unruly-logo-icon" alt="Header logo" />
<span class='unruly-logo-text' style='line-height: inherit'>Unruly<strong>Tech</strong></span>
</a></div>
<div class='navbar-collapse collapse' id='mainNavigation'>
<ul class='nav navbar-nav'>
<li>
<a href="../../../../repositories.html"><span class='fa fa-code-fork fa-fw'></span>
<span>Repos</span>
</a></li>
<li>
<a href="../../../../careers.html"><span class='fa fa-fw fa-suitcase'></span>
<span>Careers</span>
</a></li>
<li>
<a href="../../../../events.html"><span class='fa fa-calendar fa-fw'></span>
<span>Events</span>
</a></li>
<li>
<a href="../../../../about.html"><span>About</span>
</a></li>
</ul>
<ul class='nav navbar-nav navbar-right hidden-sm'>
<li>
<a class='unruly-logo' href='http://unruly.co' title='Unruly'>
<img alt='Unruly' class='unruly-logo-icon' src='//video.cdn-unrulymedia-5.com/ux-guidelines/latest/images/unruly-logo.svg' style='height: 4.5rem'>
</a>
</li>
</ul>
</div>
</div>
</div>
</nav>
<div class='header-spacer'></div>

<article>
<div class='jumbotron jumbotron-title'>
<div class='container'>
<div class='row'>
<div class='jumbotron-details col-md-10 col-md-offset-1'>
<h1 class='page-header'>Byte-Monkey: Bytecode-level fault injection for the JVM</h1>
<div class='post-meta text-muted'>
<time>May 30, 2016</time>
• By Alex Wilson
</div>
</div>
</div>
</div>
<div class='jumbotron-background' style='background-image: url(&#39;/images/jobs-banner-placeholder.jpg&#39;)'></div>
</div>
<div class='container'>
<div class='post post--current col-md-10 col-md-offset-1'>
<div class='post-content'>
<p>The software development community is full of memes.</p>

<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">We replaced our monolith with micro services so that every outage could be more like a murder mystery.</p>&mdash; Honest Status Page (@honest_update) <a href="https://twitter.com/honest_update/status/651897353889259520">October 7, 2015</a></blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<p>No, not what you’d expect to find on the Reddit front-page, but instead “an idea, behavior, or style that spreads from person to person within a culture” (from <a href="https://en.wikipedia.org/wiki/Meme">Wikipedia</a>).</p>

<p>Well-known software development memes include “TDD is dead”, “Java is slow”, “What’s today’s new Javascript framework/build tool?”, "MongoDB is Snapchat for databases". This project and post grew from a meme I noticed on Twitter about microservices, the gist being “you can simulate microservices by adding latency to all your method calls”.</p>

<p>Hmm. That’s actually an interesting idea. Let’s do it.</p>

<h2>Introducing Byte-Monkey</h2>

<p><a href="https://github.com/mrwilson/byte-monkey">Byte-Monkey</a> takes inspiration from Netflix’s chaos-monkeys, which have become synonymous with fault-tolerance experiments through controlled failure injection. It runs on the JVM, and twiddles the bytecode of your app to introduce the kind of failures you might encounter such as exceptions and latency.</p>

<h2>Using with a JVM app</h2>

<p>Byte-Monkey is loaded as a java agent during JVM startup.</p>

<pre><code>java -javaagent:byte-monkey.jar=mode:fault,rate:0.5,filter:org/eclipse/ -jar your-app.jar</code></pre>

<p>The above configuration would run it in Fault mode (throw exceptions) but only instrument classes in packages under <code>org/eclipse/</code> and throw exceptions 50% of the time. More information about configuration options is on the GitHub Page</p>

<h2>Why would I want to use this?</h2>

<p>I've made a <a href="http://probablyfine.co.uk/2015/05/07/ghosts-in-the-pipes/">couple</a> of <a href="http://probablyfine.co.uk/2015/04/09/injecting-application-failures-in-production/">posts</a> previously about the utility of running controlled experiments to discover failure cases, at the application level or infrastructure level. Such drills give us the power and knowledge to answer questions about the behaviour of our multi-actor systems under different modes of failure.</p>

<p>Byte-Monkey addresses the scenario where you want to test something inside your JVM app that may not be triggered by external factors. It lets you answer questions like "If our db connection driver started exhibiting faults every 1/10 operations, does the app release connections properly or does it cause issues?" or "What happens if our http client suddenly starts holding onto connections for an extra 100ms?"</p>

<p>With Byte-Monkey, you can turn up the chance of failures occurring and see how your system behaves without having to make any adjustments to the application code itself.</p>

<h2>Implementation</h2>

<p>The detailed internals of how Byte-Monkey changes the application code are in the <a href="https://github.com/mrwilson/byte-monkey">Github project README</a> </p>

</div>
</div>
</div>
<div class='alert alert-info post__disclosure'>
<div class='container'>
This is a copy of a post from Alex Wilson's Blog. You can view the original
<a href="http://probablyfine.co.uk/2016/05/30/announcing-byte-monkey/">here <i class="fa fa-external-link"></i></a>.
</div>
</div>
<div class='post__staff'>
<div class='container'>
<div class='row'>
<div class='col-md-10 col-md-offset-1'>
<div class='row'>
<div class='col-md-12 post-meta'>About the Author</div>
</div>
<div class='row post__staff__details'>
<div class='col-xs-2'>
<img class='img-circle img-thumbnail' src='https://avatars2.githubusercontent.com/u/460299'>
</div>
<div class='col-xs-10 post__staff__details__text'>
<h4>Alex Wilson</h4>
<p>Software Developer</p>
<div class='post__staff__links'>
<a class='badge' href='http://probablyfine.co.uk/' title='Alex&#39;s Blog'>
<i class='fa fa-fw fa-home'></i>
</a>
<a class='badge' href='https://twitter.com/pr0bablyfine' title='Alex&#39;s Twitter'>
<i class='fa fa-fw fa-twitter'></i>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class='container'>
<div class='row'>
<div class='col-md-10 col-md-offset-1'>
<div class='post-meta'>Tags</div>
<p class='tag-list'>
<a href="../../../tags/java.html" class="label label-info">java</a>
</p>
</div>
</div>
</div>
</article>

<footer class='footer unruly-footer'>
<ul class='unruly-footer-nav'>
<li>
<a href='http://unruly.co'>&copy; 2016 Unruly</a>
</li>
</ul>
</footer>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/mustache.js/0.8.1/mustache.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/headroom/0.7.0/headroom.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/headroom/0.7.0/jQuery.headroom.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
<script src="../../../../javascripts/main.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-54623334-2', 'auto');
    ga('send', 'pageview');
</script>
<script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": "http://tech.unruly.co",
      "logo": "http://tech.unruly.co/images/branded-product-logo.png"
    }
</script>
<script type="application/ld+json">
    {  "@context" : "http://schema.org",
       "@type" : "WebSite",
       "name" : "Unruly Tech",
       "url" : "http://tech.unruly.co/"
    }
</script>
</body>
