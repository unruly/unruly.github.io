var pages=pages||{};pages.repositories=pages.repositories||function(){function e(){$.get("/javascripts/partials/repo.mustache").success(r).success(t)}function r(e){$.getJSON("/data/repositories.json").success(function(r){n("#reposContainer",e,"http://tech-api.unruly.co/github/unruly/repos",r)})}function t(e){n("#forksContainer",e,"http://tech-api.unruly.co/github/unruly/forks")}function n(e,r,t,n){$.getJSON(t).success(function(t){var u=$(e);t.map(function(e){return e.pushed_at=new Date(e.pushed_at),e}).sort(function(e,r){return r.pushed_at-e.pushed_at}).forEach(function(e){var t=a(n,e),o=Mustache.render(r,s(e,t));u.append(o)}),u.find(".loading").remove()})}function a(e,r){e=e||{};var t=e[r.name]||{};return t.badges&&t.badges.filter(function(e){return!e.url}).forEach(function(e){e.url=r.html_url}),t}function s(e,r){var t=e.language||"Mixed",n=e.homepage||e.html_url;return e.fork&&(n=e.html_url),{name:e.name,description:e.description,projectUrl:n,repoUrl:e.html_url,image:r.image,badges:r.badges,language:t,language_class:t.toLowerCase(),stars:e.stargazers_count,fork:e.fork}}return{init:e}}(),pages.repositories.init();